<div class="layout-container">
  <app-aside-bar></app-aside-bar>

  <div class="availability-container">
    <div class="header-section">
      <h2>Disponibilidad del Odontólogo</h2>
      <button class="btn-primary" (click)="addNewAvailability()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        Nueva Disponibilidad
      </button>
    </div>

    <div class="availability-grid">
      <div *ngFor="let availability of availabilities" class="availability-card">
        <div class="card-header">
          <h3>{{ availability.diaSemana }}</h3>
          <div class="status-toggle">
            <label class="switch">
              <input 
                type="checkbox" 
                [checked]="availability.activo"
                (change)="toggleAvailability(availability.id)"
              >
              <span class="slider"></span>
            </label>
            <span class="status-text" [class]="getStatusClass(availability.activo)">
              {{ getStatusText(availability.activo) }}
            </span>
          </div>
        </div>

        <div class="card-content">
          <div class="time-info">
            <div class="time-range">
              <span class="time-label">Horario:</span>
              <span class="time-value">{{ availability.horaInicio }} - {{ availability.horaFin }}</span>
            </div>
            <div class="blocks-info">
              <span class="blocks-label">Bloques disponibles:</span>
              <span class="blocks-count">{{ availability.bloquesDisponibles.length }}</span>
            </div>
          </div>

          <div class="time-blocks">
            <div class="blocks-grid">
              <span 
                *ngFor="let block of availability.bloquesDisponibles.slice(0, 6)" 
                class="time-block"
              >
                {{ block }}
              </span>
              <span *ngIf="availability.bloquesDisponibles.length > 6" class="more-blocks">
                +{{ availability.bloquesDisponibles.length - 6 }} más
              </span>
            </div>
          </div>
        </div>

        <div class="card-actions">
          <button class="btn-icon" (click)="editAvailability(availability.id)" title="Editar">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
              <path d="m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
          </button>
          <button class="btn-icon delete" (click)="deleteAvailability(availability.id)" title="Eliminar">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3,6 5,6 21,6"></polyline>
              <path d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <div *ngIf="availabilities.length === 0" class="empty-state">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="16" y1="2" x2="16" y2="6"></line>
        <line x1="8" y1="2" x2="8" y2="6"></line>
        <line x1="3" y1="10" x2="21" y2="10"></line>
      </svg>
      <h3>No hay disponibilidad configurada</h3>
      <p>Comienza creando tu primera disponibilidad para poder agendar citas.</p>
      <button class="btn-primary" (click)="addNewAvailability()">Crear Disponibilidad</button>
    </div>
  </div>
</div> 